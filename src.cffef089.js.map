{"version":3,"sources":["src/state.js","src/data.js","src/components/modal/index.js","src/components/lightbox/index.js","src/components/search/index.js","src/index.js"],"names":["state","searchTerm","searchBy","drinks","currentDrink","setState","toSet","newValue","fetchDrinksByName","url","fetch","then","res","json","data","catch","error","console","fetchDrinkById","id","fetchDrinksByIngredient","modal","markup","updateModalContent","drink","log","idDrink","title","strDrink","strDrinkThumb","ingredients","ingredientsMarkup","instructions","strInstructions","i","prop","push","ingredient","titleEl","document","querySelector","imageEl","ingredientsEl","instructionsEl","innerHTML","src","alt","open","insertAdjacentHTML","init","close","remove","addEventListener","handleCloseClick","handleKeys","event","target","key","lightbox","forEach","Array","from","querySelectorAll","openLightbox","e","preventDefault","currentDrinkIndex","getCurrentDrinkIndex","map","img","outerHTML","findIndex","clearLightbox","getElementById","doSearch","search","clearNoResults","term","value","toLowerCase","type","undefined","noResults"],"mappings":"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","file":"src.cffef089.js","sourceRoot":"..","sourcesContent":["const state = {\n    searchTerm: null,\n    searchBy: null,\n    drinks: null,\n    currentDrink: null,\n};\n\nconst setState = (toSet, newValue) => {\n    state[toSet] = newValue;\n};\n\nexport { state, setState };","import { state } from \"./state\";\n\nexport function fetchDrinksByName() {\n    const url = `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${state.searchTerm}`;\n    return fetch(url)\n        .then(res => res.json())\n        .then(data => data.drinks)\n        .catch(error => console.error(error));\n}\n\nexport function fetchDrinkById(id) {\n    const url = `https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${id}`;\n    return fetch(url)\n        .then(res => res.json())\n        .then(data => data.drinks)\n        .catch(error => console.error(error));\n}\n\nexport function fetchDrinksByIngredient() {\n    const url = `https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=${state.searchTerm}`;\n    return fetch(url)\n        .then(res => res.json())\n        .then(data => data.drinks)\n        .catch(error => console.error(error));\n}","import { state, setState } from \"../../state\";\nimport { fetchDrinkById } from \"../../data\";\n\nimport \"./index.css\";\n\nexport function modal() {\n    let markup = `\n    <div id=\"overlay\">\n        <div id=\"modal\">\n            <article>\n                <h3></h3>\n                <img src=\"\" alt=\"\" />\n                <h5 class=\"ingredients-header\">Ingredients</h5>\n                <ul class=\"ingredients\"></ul>\n                <h5 class=\"instructions-header\">Instructions</h5>\n                <p class=\"instructions\"></p>\n            </article>\n            <button id=\"close\" href=\"#\">X</button>\n        </div>\n    </div>\n    `;\n\n    return markup;\n}\n\nasync function updateModalContent() {\n    let drink = state.drinks[state.currentDrink];\n    console.log(drink);\n\n    if ( state.searchBy === `ingredient` ) {\n        drink = await fetchDrinkById(drink.idDrink);\n        drink = drink[0];\n    }\n\n    console.log(drink);\n    const title = drink.strDrink;\n    const url = drink.strDrinkThumb;\n    const ingredients = [];\n    let ingredientsMarkup = ``;\n    const instructions = drink.strInstructions;\n\n    // There are 15 objects to store ingredients in the json. Loop through.\n    for (let i = 1; i <= 15; i++ ) {\n        const prop = `strIngredient` + i;\n        if ( null === drink[prop] ) {\n            break;\n        }\n        ingredients.push(drink[prop]);\n    }\n    \n    for (const ingredient of ingredients) {\n        console.log(`${ingredient}`);\n        ingredientsMarkup += `<li>${ingredient}</li>`;\n    }\n    //console.log(ingredients);\n    const titleEl = document.querySelector(`#modal h3`);\n    const imageEl = document.querySelector(`#modal img`);\n    const ingredientsEl = document.querySelector(`#modal .ingredients`);\n    const instructionsEl = document.querySelector(`#modal .instructions`);\n  \n    titleEl.innerHTML = title;\n    imageEl.src = url;\n    imageEl.alt = title;\n    ingredientsEl.innerHTML = ingredientsMarkup;\n    instructionsEl.innerHTML = instructions;\n}\n\nexport function open() {\n    const container = document.querySelector(`#app`);\n    container.insertAdjacentHTML(\"beforeend\", modal());\n\n    updateModalContent();\n    init();\n}\n\nfunction close() {\n    const overlay = document.querySelector(`#overlay`);\n    overlay.remove();\n}\n\nfunction init() {\n    const closeBtn = document.querySelector(`#modal #close`);\n    closeBtn.addEventListener(`click`, close);\n  \n    const overlay = document.querySelector(`#overlay`);\n    overlay.addEventListener(`click`, handleCloseClick);\n\n    document.addEventListener(\"keyup\", handleKeys);\n}\n\nfunction handleCloseClick(event) {\n    if (event.target.id == \"overlay\") {\n        close();\n    }\n}\n\nfunction handleKeys(event) {\n    if (event.key === \"Escape\") close();\n}","import { state, setState } from \"../../state\";\nimport { open as openModal } from \"../modal\";\nimport \"./index.css\";\n\nexport default function lightbox() {\n    let markup = `<div class=\"lightbox\">`;\n    state.drinks.forEach(drink => {\n        const url = drink.strDrinkThumb;\n        const title = drink.strDrink;\n        markup += `<div class=\"thumbnail\">\n            <div class=\"img-container\">\n                <img src=\"${url}\" alt=\"${title}\" />\n            </div>\n            <h6>${title}</h6>\n        </div>`;\n    });\n    markup += `</div>`;\n    return markup;\n}\n\nexport function init() {\n    const drinks = Array.from(document.querySelectorAll(`.lightbox img`));\n    drinks.forEach(drink => {\n        drink.addEventListener(`click`, openLightbox);\n    });\n}\n\nfunction openLightbox(e) {\n    e.preventDefault();\n    const currentDrinkIndex = getCurrentDrinkIndex(event.target);\n    setState(`currentDrink`, currentDrinkIndex);\n    console.log(state.currentDrink);\n    openModal();\n}\n\nfunction getCurrentDrinkIndex(drink) {\n    const drinks = Array.from(document.querySelectorAll(`.lightbox img`));\n\n    let currentDrinkIndex = drinks\n        .map(img => img.outerHTML)\n        .findIndex(img => img == drink.outerHTML);\n\n    return currentDrinkIndex;\n}\n\nexport function clearLightbox() {\n    const lightbox = document.querySelector(`.lightbox`);\n    if (lightbox) lightbox.remove();\n}","import \"./index.css\";\n\nimport { state, setState } from \"../../state\";\nimport { fetchDrinksByName, fetchDrinksByIngredient } from \"../../data\";\nimport lightbox, { init as initLightbox, clearLightbox } from \"../lightbox\";\n\nexport function init() {\n    const search = document.getElementById(`search`);\n    search.addEventListener(`submit`, doSearch);\n}\n\nexport default function search() {\n    return `\n        <h1>Find Your Cocktail 🍸</h1>\n        <form name=\"search\" id=\"search\">\n            <input id=\"search-field\" name=\"search-term\" type=\"search\" placeholder=\"Search here...\" />\n            <select id=\"search-select\" name=\"search-type\">\n                <option value=\"name\">By Cocktail Name</option>\n                <option value=\"ingredient\">By Ingredient</option>\n            </select>\n            <input class=\"button-primary\" type=\"submit\" id=\"submit\" value=\"Search Cocktails\" />\n        </form>\n    `;\n}\n\nasync function doSearch(e) {\n    e.preventDefault();\n    clearLightbox();\n    clearNoResults();\n\n    const term = document.getElementById(`search-field`).value.toLowerCase();\n    const type = document.getElementById(`search-select`).value.toLowerCase();\n    setState(`searchTerm`, term );\n    setState(`searchBy`, type );\n\n    let drinks = {};\n\n    if (`name` === type ) {\n        drinks = await fetchDrinksByName();\n    } else {\n        drinks = await fetchDrinksByIngredient();\n    }\n    \n    setState(`drinks`, drinks);\n\n    if (state.drinks === null || state.drinks === undefined) {\n        const markup = `<h4 class=\"no-results\">There are no results for <strong>${state.searchTerm}</strong> when searching for cocktails by ${state.searchBy}.</h4>`;\n        document.getElementById(`app`).insertAdjacentHTML(`beforeend`, markup);\n        setState(`searchTerm`, null);\n        document.getElementById(`search-field`).value = state.searchTerm;\n    } else {\n        const markup = lightbox();\n        document.getElementById(`app`).insertAdjacentHTML(`beforeend`, markup);\n        initLightbox();\n    }\n}\n\nfunction clearNoResults() {\n    const noResults = document.querySelector(`.no-results`);\n    if (noResults) noResults.remove();\n}","import \"./index.css\";\r\n\r\nimport search, { init as initSearch } from \"./components/search\";\r\n\r\nfunction init() {\r\n    let markup = search();\r\n    document.getElementById(`app`).insertAdjacentHTML(`beforeend`,markup);\r\n\r\n    initSearch();\r\n}\r\n\r\ninit();\r\n"]}